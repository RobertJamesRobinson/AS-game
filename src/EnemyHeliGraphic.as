package
{
	import flash.display.Bitmap;
	import flash.display.Sprite;
	
	public class EnemyHeliGraphic
	{
		[Embed(source=".\\images\\enemy\\0.png")]
   		protected var heli0Graphic:Class;
   		protected var heli0G:Bitmap = new heli0Graphic();
   		
   		[Embed(source=".\\images\\enemy\\1.png")]
   		protected var heli1Graphic:Class;
   		protected var heli1G:Bitmap = new heli1Graphic();
   		
   		[Embed(source=".\\images\\enemy\\2.png")]
   		protected var heli2Graphic:Class;
   		protected var heli2G:Bitmap = new heli2Graphic();
   		
   		[Embed(source=".\\images\\enemy\\3.png")]
   		protected var heli3Graphic:Class;
   		protected var heli3G:Bitmap = new heli3Graphic();
   		
   		[Embed(source=".\\images\\enemy\\4.png")]
   		protected var heli4Graphic:Class;
   		protected var heli4G:Bitmap = new heli4Graphic();
   		
   		[Embed(source=".\\images\\enemy\\5.png")]
   		protected var heli5Graphic:Class;
   		protected var heli5G:Bitmap = new heli5Graphic();
   		
   		[Embed(source=".\\images\\enemy\\6.png")]
   		protected var heli6Graphic:Class;
   		protected var heli6G:Bitmap = new heli6Graphic();
   		
   		[Embed(source=".\\images\\enemy\\7.png")]
   		protected var heli7Graphic:Class;
   		protected var heli7G:Bitmap = new heli7Graphic();
   		
   		[Embed(source=".\\images\\enemy\\8.png")]
   		protected var heli8Graphic:Class;
   		protected var heli8G:Bitmap = new heli8Graphic();
   		
   		[Embed(source=".\\images\\enemy\\9.png")]
   		protected var heli9Graphic:Class;
   		protected var heli9G:Bitmap = new heli9Graphic();
   		
   		[Embed(source=".\\images\\enemy\\10.png")]
   		protected var heli10Graphic:Class;
   		protected var heli10G:Bitmap = new heli10Graphic();
   		
   		[Embed(source=".\\images\\enemy\\11.png")]
   		protected var heli11Graphic:Class;
   		protected var heli11G:Bitmap = new heli11Graphic();
   		
   		[Embed(source=".\\images\\enemy\\12.png")]
   		protected var heli12Graphic:Class;
   		protected var heli12G:Bitmap = new heli12Graphic();
   		
   		[Embed(source=".\\images\\enemy\\13.png")]
   		protected var heli13Graphic:Class;
   		protected var heli13G:Bitmap = new heli13Graphic();
   		
   		[Embed(source=".\\images\\enemy\\14.png")]
   		protected var heli14Graphic:Class;
   		protected var heli14G:Bitmap = new heli14Graphic();
   		
   		[Embed(source=".\\images\\enemy\\15.png")]
   		protected var heli15Graphic:Class;
   		protected var heli15G:Bitmap = new heli15Graphic();
   		
   		[Embed(source=".\\images\\enemy\\16.png")]
   		protected var heli16Graphic:Class;
   		protected var heli16G:Bitmap = new heli16Graphic();
   		
   		[Embed(source=".\\images\\enemy\\17.png")]
   		protected var heli17Graphic:Class;
   		protected var heli17G:Bitmap = new heli17Graphic();
   		
   		[Embed(source=".\\images\\enemy\\18.png")]
   		protected var heli18Graphic:Class;
   		protected var heli18G:Bitmap = new heli18Graphic();
   		
   		[Embed(source=".\\images\\enemy\\19.png")]
   		protected var heli19Graphic:Class;
   		protected var heli19G:Bitmap = new heli19Graphic();
   		
   		[Embed(source=".\\images\\enemy\\20.png")]
   		protected var heli20Graphic:Class;
   		protected var heli20G:Bitmap = new heli20Graphic();
   		
   		[Embed(source=".\\images\\enemy\\21.png")]
   		protected var heli21Graphic:Class;
   		protected var heli21G:Bitmap = new heli21Graphic();
   		
   		[Embed(source=".\\images\\enemy\\22.png")]
   		protected var heli22Graphic:Class;
   		protected var heli22G:Bitmap = new heli22Graphic();
   		
   		[Embed(source=".\\images\\enemy\\23.png")]
   		protected var heli23Graphic:Class;
   		protected var heli23G:Bitmap = new heli23Graphic();
   		
   		[Embed(source=".\\images\\enemy\\24.png")]
   		protected var heli24Graphic:Class;
   		protected var heli24G:Bitmap = new heli24Graphic();
   		
   		[Embed(source=".\\images\\enemy\\25.png")]
   		protected var heli25Graphic:Class;
   		protected var heli25G:Bitmap = new heli25Graphic();
   		
   		[Embed(source=".\\images\\enemy\\26.png")]
   		protected var heli26Graphic:Class;
   		protected var heli26G:Bitmap = new heli26Graphic();
   		
   		[Embed(source=".\\images\\enemy\\27.png")]
   		protected var heli27Graphic:Class;
   		protected var heli27G:Bitmap = new heli27Graphic();
   		
   		[Embed(source=".\\images\\enemy\\28.png")]
   		protected var heli28Graphic:Class;
   		protected var heli28G:Bitmap = new heli28Graphic();
   		
   		[Embed(source=".\\images\\enemy\\29.png")]
   		protected var heli29Graphic:Class;
   		protected var heli29G:Bitmap = new heli29Graphic();
   		
   		[Embed(source=".\\images\\enemy\\30.png")]
   		protected var heli30Graphic:Class;
   		protected var heli30G:Bitmap = new heli30Graphic();
   		
   		[Embed(source=".\\images\\enemy\\31.png")]
   		protected var heli31Graphic:Class;
   		protected var heli31G:Bitmap = new heli31Graphic();
   		
   		[Embed(source=".\\images\\enemy\\Blade0.png")]
   		protected var blade0Graphic:Class;
   		protected var blade0G:Bitmap = new blade0Graphic();
   		
   		[Embed(source=".\\images\\enemy\\Blade1.png")]
   		protected var blade1Graphic:Class;
   		protected var blade1G:Bitmap = new blade1Graphic();
   		
   		[Embed(source=".\\images\\enemy\\Blade2.png")]
   		protected var blade2Graphic:Class;
   		protected var blade2G:Bitmap = new blade2Graphic();
   		
   		[Embed(source=".\\images\\enemy\\Blade3.png")]
   		protected var blade3Graphic:Class;
   		protected var blade3G:Bitmap = new blade3Graphic();
   		
   		[Embed(source=".\\images\\enemy\\Blade4.png")]
   		protected var blade4Graphic:Class;
   		protected var blade4G:Bitmap = new blade4Graphic();
   		
   		[Embed(source=".\\images\\enemy\\Blade5.png")]
   		protected var blade5Graphic:Class;
   		protected var blade5G:Bitmap = new blade5Graphic();
   		
   		[Embed(source=".\\images\\enemy\\Blade6.png")]
   		protected var blade6Graphic:Class;
   		protected var blade6G:Bitmap = new blade6Graphic();
   		
   		[Embed(source=".\\images\\enemy\\Blade7.png")]
   		protected var blade7Graphic:Class;
   		protected var blade7G:Bitmap = new blade7Graphic();
   		
   		[Embed(source=".\\images\\enemy\\Blade8.png")]
   		protected var blade8Graphic:Class;
   		protected var blade8G:Bitmap = new blade8Graphic();
		
		[Embed(source=".\\images\\shadow.png")]
   		protected var shadowGraphic:Class; 
   		protected var shadowG:Bitmap = new shadowGraphic();
		
		protected var heli:Sprite=new Sprite();
		protected var heliShadow:Sprite=new Sprite();
		protected var heliBody:Sprite=new Sprite();
		protected var heliBlades:Sprite=new Sprite();
		
		protected var bodyFrame:int=0;
		protected var bladesFrame:int=0;
		protected var heading:Number=0;
		protected var blades:Array=new Array(9);	//number of helicoptor blades frames
		protected var body:Array=new Array(32);		//number of helicoptor body frames
		
		public function EnemyHeliGraphic()
		{
			var heliScale:Number=1;
			var shadowOffsetX:Number=-15;
			var shadowOffsetY:Number=50;
			
			//set up array to hold bitmaps, for some reason this works to stop the garbage collector from deleting them while not in use
			body[0]=heli0G;
			body[1]=heli1G;
			body[2]=heli2G;
			body[3]=heli3G;
			body[4]=heli4G;
			body[5]=heli5G;
			body[6]=heli6G;
			body[7]=heli7G;
			body[8]=heli8G;
			body[9]=heli9G;
			body[10]=heli10G;
			body[11]=heli11G;
			body[12]=heli12G;
			body[13]=heli13G;
			body[14]=heli14G;
			body[15]=heli15G;
			body[16]=heli16G;
			body[17]=heli17G;
			body[18]=heli18G;
			body[19]=heli19G;
			body[20]=heli20G;
			body[21]=heli21G;
			body[22]=heli22G;
			body[23]=heli23G;
			body[24]=heli24G;
			body[25]=heli25G;
			body[26]=heli26G;
			body[27]=heli27G;
			body[28]=heli28G;
			body[29]=heli29G;
			body[30]=heli30G;
			body[31]=heli31G;
			
			//do the same for the blades (store them in an array)
			blades[0]=blade0G;
			blades[1]=blade1G;
			blades[2]=blade2G;
			blades[3]=blade3G;
			blades[4]=blade4G;
			blades[5]=blade5G;
			blades[6]=blade6G;
			blades[7]=blade7G;
			blades[8]=blade8G;
			
			//apply all offsets
			heli0G.x=-100;
			heli0G.y=-100;
			heli1G.x=-100;
			heli1G.y=-100;
			heli2G.x=-100;
			heli2G.y=-100;
			heli3G.x=-100;
			heli3G.y=-100;
			heli4G.x=-100;
			heli4G.y=-100;
			heli5G.x=-100;
			heli5G.y=-100;
			heli6G.x=-100;
			heli6G.y=-100;
			heli7G.x=-100;
			heli7G.y=-100;
			heli8G.x=-100;
			heli8G.y=-100;
			heli9G.x=-100;
			heli9G.y=-100;
			heli10G.x=-100;
			heli10G.y=-100;
			heli11G.x=-100;
			heli11G.y=-100;
			heli12G.x=-100;
			heli12G.y=-100;
			heli13G.x=-100;
			heli13G.y=-100;
			heli14G.x=-100;
			heli14G.y=-100;
			heli15G.x=-100;
			heli15G.y=-100;
			heli16G.x=-100;
			heli16G.y=-100;
			heli17G.x=-100;
			heli17G.y=-100;
			heli18G.x=-100;
			heli18G.y=-100;
			heli19G.x=-100;
			heli19G.y=-100;
			heli20G.x=-100;
			heli20G.y=-100;
			heli21G.x=-100;
			heli21G.y=-100;
			heli22G.x=-100;
			heli22G.y=-100;
			heli23G.x=-100;
			heli23G.y=-100;
			heli24G.x=-100;
			heli24G.y=-100;
			heli25G.x=-100;
			heli25G.y=-100;
			heli26G.x=-100;
			heli26G.y=-100;
			heli27G.x=-100;
			heli27G.y=-100;
			heli28G.x=-100;
			heli28G.y=-100;
			heli29G.x=-100;
			heli29G.y=-100;
			heli30G.x=-100;
			heli30G.y=-100;
			heli31G.x=-100;
			heli31G.y=-100;
			
			blade0G.x=-100;
			blade0G.y=-100;
			blade1G.x=-100;
			blade1G.y=-100;
			blade2G.x=-100;
			blade2G.y=-100;
			blade3G.x=-100;
			blade3G.y=-100;
			blade4G.x=-100;
			blade4G.y=-100;
			blade5G.x=-100;
			blade5G.y=-100;
			blade6G.x=-100;
			blade6G.y=-100;
			blade7G.x=-100;
			blade7G.y=-100;
			blade8G.x=-100;
			blade8G.y=-100;
			
			shadowG.x=-50+shadowOffsetX;
			shadowG.y=-50+shadowOffsetY;
			
			//add at least 1 frame to each of the heli elements
			heliBody.addChild(body[0]);
			heliBlades.addChild(blades[0]);
			heliShadow.addChild(shadowG);
			
			//apply scaling to the individual sprite containers
			heliBlades.scaleX=heliScale;
			heliBlades.scaleY=heliScale;
			heliBody.scaleX=heliScale;
			heliBody.scaleY=heliScale;
			heliShadow.scaleX=heliScale;
			heliShadow.scaleY=heliScale;
			
			//add the three elements to the heli sprite, in the right order! ground up that is
			heli.addChild(heliShadow);
			heli.addChild(heliBody);
			heli.addChild(heliBlades);
		}
		public function nextFrame():void
		{
			setHeliBody(heading);
			animateBlades();
		}
		public function setRotation(ang:Number):void
		{
			heading=ang-45;
		}
		private function setHeliBody(ang:Number):void
		{
			var newFrame:int=0;
			
			//work out which frame to use next
			if(ang>=354.375||ang<5.625)
				newFrame=0;
			if(ang>=5.625&&ang<16.875)
				newFrame=1;
			if(ang>=16.875&&ang<28.125)
				newFrame=2;
			if(ang>=28.125&&ang<39.375)
				newFrame=3;
			if(ang>=39.375&&ang<50.625)
				newFrame=4;
			if(ang>=50.625&&ang<61.875)
				newFrame=5;
			if(ang>=61.875&&ang<73.125)
				newFrame=6;
			if(ang>=73.125&&ang<84.375)
				newFrame=7;
			if(ang>=84.375&&ang<95.625)
				newFrame=8;
			if(ang>=95.625&&ang<106.875)
				newFrame=9;
			if(ang>=106.875&&ang<118.125)
				newFrame=10;
			if(ang>=118.125&&ang<129.375)
				newFrame=11;
			if(ang>=129.375&&ang<140.625)
				newFrame=12;
			if(ang>=140.625&&ang<151.875)
				newFrame=13;
			if(ang>=151.875&&ang<163.125)
				newFrame=14;
			if(ang>=163.125&&ang<174.375)
				newFrame=15;
			if(ang>=174.375&&ang<185.625)
				newFrame=16;
			if(ang>=185.625&&ang<196.875)
				newFrame=17;
			if(ang>=196.875&&ang<208.125)
				newFrame=18;
			if(ang>=208.125&&ang<219.375)
				newFrame=19;
			if(ang>=219.375&&ang<230.625)
				newFrame=20;
			if(ang>=230.625&&ang<241.875)
				newFrame=21;
			if(ang>=241.875&&ang<253.125)
				newFrame=22;
			if(ang>=253.125&&ang<264.375)
				newFrame=23;
			if(ang>=264.375&&ang<275.625)
				newFrame=24;
			if(ang>=275.625&&ang<286.875)
				newFrame=25;
			if(ang>=286.875&&ang<298.125)
				newFrame=26;
			if(ang>=298.125&&ang<309.375)
				newFrame=27;
			if(ang>=309.375&&ang<320.625)
				newFrame=28;
			if(ang>=320.625&&ang<331.875)
				newFrame=29;
			if(ang>=331.875&&ang<343.125)
				newFrame=30;
			if(ang>=343.125&&ang<354.375)
				newFrame=31;
			//change which helibody is visible depending on the angle given, but only if the new angle is different from the old angle
			if(newFrame!=bodyFrame)
			{
				//remove the old frame
				heliBody.removeChildAt(0);
				
				//make new frame visible
				heliBody.addChild(body[newFrame]);
				
				//make oldFrame the same as newFrame for next run through
				bodyFrame=newFrame;
			}
		}
		private function animateBlades():void
		{
			//remove the old frame
			heliBlades.removeChildAt(0);

			//increment the frame, reverting to 0 if over the max number of frames
			bladesFrame++;
			if(bladesFrame>8)
				bladesFrame=0;
				
			//make new frame visible
			heliBlades.addChild(blades[bladesFrame]);
		}
		
		//return the helicoptor graphic to the calling class
		public function getGraphic():Sprite
		{
			return heli;
		}
	}
}